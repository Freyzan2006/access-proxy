# üß± Access Proxy

![Access Proxy](./public/preview.png)

> –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞—â–∏—Ç—ã —Ç—Ä–∞—Ñ–∏–∫–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–æ–≤, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## üöÄ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–≥–æ **reverse proxy**, –∫–æ—Ç–æ—Ä—ã–π:
- —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥–æ–º–µ–Ω—ã –∏ HTTP-–º–µ—Ç–æ–¥—ã;
- –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤;
- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã (`dev` / `prod`);
- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **YAML** –∏–ª–∏ **CLI-—Ñ–ª–∞–≥–∏**.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----------|-----------|--------|
| `target` | –¶–µ–ª–µ–≤–æ–π URL, –∫—É–¥–∞ –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã | `"http://httpbin.org"` |
| `port` | –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è proxy-—Å–µ—Ä–≤–µ—Ä | `8000` |
| `allowed_domains` | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ IP/–¥–æ–º–µ–Ω—ã | `["192.168.215.33", "::1"]` |
| `blocked_methods` | –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ HTTP-–º–µ—Ç–æ–¥—ã | `["DELETE", "PATCH"]` |
| `rate_limit_per_minute` | –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É | `100` |
| `log_requests` | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ | `false` |
| `environment` | –†–µ–∂–∏–º –æ–∫—Ä—É–∂–µ–Ω–∏—è (`dev` / `prod`) | `prod` |

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### üîß Development (–ª–æ–∫–∞–ª—å–Ω–æ)
```bash
go build -o bin/access-proxy ./cmd/main.go
./bin/access-proxy --env=dev
```

### üê≥ Production (—á–µ—Ä–µ–∑ Docker)
```bash
docker run --network=host -p 8080:8080 access-proxy     ./access-proxy --env=prod -port 8080 -rate 10 -log true
```

---

## üß© –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–∞–Ω–∞ **—á–µ—Ä–µ–∑ YAML-—Ñ–∞–π–ª** –∏–ª–∏ **—á–µ—Ä–µ–∑ CLI-—Ñ–ª–∞–≥–∏**.  
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: **—Ñ–ª–∞–≥–∏ > YAML > –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**.

### –ü—Ä–∏–º–µ—Ä `config.yaml`
```yaml
target: "http://httpbin.org"
port: 8000
allowed_domains:
  - 192.168.215.33
  - ::1
blocked_methods: 
  - DELETE
  - PATCH
rate_limit_per_minute: 100
log_requests: false
environment: prod
```

---

## ‚öôÔ∏è CLI-—Ñ–ª–∞–≥–∏

| –§–ª–∞–≥ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------|-----------|
| `--target` | `string` | –¶–µ–ª–µ–≤–æ–π URL –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è |
| `--port` | `int` | –ü–æ—Ä—Ç –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–∫—Å–∏ |
| `--rate` | `int` | –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É |
| `--log` | `bool` | –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ |
| `--domains` | `[]string` | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã/IP |
| `--blocks` | `[]string` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ HTTP-–º–µ—Ç–æ–¥—ã |
| `--env` | `string` | –†–µ–∂–∏–º –æ–∫—Ä—É–∂–µ–Ω–∏—è (`dev` –∏–ª–∏ `prod`) |
| `--config` | `string` | –ü—É—Ç—å –∫ YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |

---

## üß† –ü—Ä–∏–Ω—Ü–∏–ø –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è YAML-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `config.yaml`).
2. –û–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è CLI-—Ñ–ª–∞–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ YAML.
3. –ï—Å–ª–∏ —Ñ–ª–∞–≥ –ø–µ—Ä–µ–¥–∞–Ω –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ ‚Äî –æ–Ω **–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç** YAML.
4. –ö–æ–Ω—Ñ–∏–≥ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
access-proxy/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/             # –ó–∞–≥—Ä—É–∑–∫–∞ YAML + —Ñ–ª–∞–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ proxy/              # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ types/              # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã (StringSlice –∏ —Ç.–ø.)
‚îú‚îÄ‚îÄ bin/                    # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
‚îú‚îÄ‚îÄ config.yaml             # –ö–æ–Ω—Ñ–∏–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îî‚îÄ‚îÄ Dockerfile              # –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```

---

## üß© –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏

### Dev
```bash
./bin/access-proxy --env=dev --log true
```

### Prod
```bash
./bin/access-proxy --env=prod --rate 50 --port 8080
```

---

## üß± –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã
```bash
curl -X GET http://localhost:8000/get
```

‚úÖ –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –ø—Ä–æ—Ö–æ–¥—è—Ç  
üö´ –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ HTTP-–º–µ—Ç–æ–¥—ã –∏ IP ‚Äî –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è  
‚ö° –ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ `rate_limit_per_minute`

---

## üßæ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License ¬© 2025 ‚Äî Access Proxy Project

---


